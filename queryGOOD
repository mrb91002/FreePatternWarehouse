SELECT p.created_at, p.user_id, p.pattern_name, materials, images, steps, p.id
FROM patterns p
JOIN (
  SELECT pattern_materials.pattern_id, array_agg(pattern_materials.material) AS materials
  FROM pattern_materials
  GROUP BY pattern_materials.pattern_id
  )  pattern_materials ON pattern_materials.pattern_id = P.id
JOIN (
  SELECT pattern_images.pattern_id, array_agg(pattern_images.image_url) AS images
  FROM pattern_images
  GROUP BY pattern_images.pattern_id
  ) pattern_images ON pattern_images.pattern_id = P.id
JOIN (
  SELECT pattern_steps.pattern_id, array_agg(pattern_steps.step_details) AS steps
  FROM pattern_steps
  GROUP BY pattern_steps.pattern_id
  ) pattern_steps ON pattern_steps.pattern_id = P.id;
